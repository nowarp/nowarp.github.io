"use strict";(self.webpackChunknowarp_github_io=self.webpackChunknowarp_github_io||[]).push([[2167],{9400:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var i=e(4848),s=e(8453);const o={},r="Integrating Misti into CI/CD",a={id:"tutorial/ci-cd",title:"Integrating Misti into CI/CD",description:"Integrating Misti into your CI/CD pipeline ensures continuous code quality checks, catching issues early in the development cycle.",source:"@site/docs/tutorial/ci-cd.md",sourceDirName:"tutorial",slug:"/tutorial/ci-cd",permalink:"/tools/misti/docs/next/tutorial/ci-cd",draft:!1,unlisted:!1,editUrl:"https://github.com/nowarp/nowarp.github.io/tree/master/docs/tutorial/ci-cd.md",tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"Getting Started",permalink:"/tools/misti/docs/next/tutorial/getting-started"},next:{title:"Command-Line Interface",permalink:"/tools/misti/docs/next/tutorial/cli"}},l={},c=[{value:"Using Tact Template",id:"using-tact-template",level:2},{value:"GitHub Actions",id:"github-actions",level:2},{value:"Using SARIF and GitHub Actions",id:"using-sarif-and-github-actions",level:3},{value:"Integration with Blueprint Projects",id:"integration-with-blueprint-projects",level:2}];function u(t){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...t.components},{Details:o}=n;return o||function(t,n){throw new Error("Expected "+(n?"component":"object")+" `"+t+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"integrating-misti-into-cicd",children:"Integrating Misti into CI/CD"}),"\n",(0,i.jsx)(n.p,{children:"Integrating Misti into your CI/CD pipeline ensures continuous code quality checks, catching issues early in the development cycle."}),"\n",(0,i.jsx)(n.h2,{id:"using-tact-template",children:"Using Tact Template"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://github.com/tact-lang/tact-template",children:(0,i.jsx)(n.code,{children:"tact-template"})})," is a template project for Tact. If you started your project from this template, Misti is already installed in ",(0,i.jsx)(n.a,{href:"https://github.com/tact-lang/tact-template/tree/main/.github/workflows",children:"the CI"}),". You also have the ",(0,i.jsx)(n.code,{children:"yarn lint"})," command available in your ",(0,i.jsx)(n.code,{children:"package.json"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"github-actions",children:"GitHub Actions"}),"\n",(0,i.jsx)(n.p,{children:"To integrate Misti into your GitHub Actions workflow, you need to add a command that runs Misti as part of your CI process. Here's how you can do it:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. Open your GitHub repository"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. Create or edit the GitHub Actions workflow YAML file"})}),"\n",(0,i.jsxs)(n.p,{children:["It could be located at e.g., ",(0,i.jsx)(n.code,{children:".github/workflows/ci.yml"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. Add the step to run Misti to your YAML file"})}),"\n",(0,i.jsxs)(o,{children:[(0,i.jsx)("summary",{children:"Example GitHub Actions configuration"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'name: CI\n\non:\n  push:\n    branches: [ "main" ]\n  pull_request:\n    branches: [ "main" ]\n  workflow_dispatch:\n\njobs:\n  test:\n    strategy:\n      fail-fast: false\n      matrix:\n        node-version: [22]\n        os: [ubuntu-latest]\n    runs-on: ${{ matrix.os }}\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n\n      - name: Install Souffl\xe9 on Ubuntu\n        if: matrix.os == \'ubuntu-latest\'\n        run: |\n          sudo wget https://souffle-lang.github.io/ppa/souffle-key.public -O /usr/share/keyrings/souffle-archive-keyring.gpg\n          echo "deb [signed-by=/usr/share/keyrings/souffle-archive-keyring.gpg] https://souffle-lang.github.io/ppa/ubuntu/ stable main" | sudo tee /etc/apt/sources.list.d/souffle.list\n          sudo apt update\n          sudo apt install souffle\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: ${{ matrix.node-version }}\n\n      - name: Install dependencies\n        run: yarn install\n\n      - name: Run Misti\n        run: yarn misti --min-severity medium /path/to/your/tact.config.json\n'})})]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"yarn misti --min-severity medium /path/to/your/tact.config.json"})," command will run Misti against your project. If Misti detects any issues that are not suppressed by your configuration, it will return a non-zero exit code, causing the CI pipeline to fail."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"--min-severity medium"})," will filter out low-priority warnings. You can always run Misti with all the detectors enabled locally in order to get the most comprehensive warnings output: ",(0,i.jsx)(n.code,{children:"yarn misti --all-detectors /path/to/your/tact.config.json"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"4. Adjusting the Misti Configuration"})}),"\n",(0,i.jsxs)(n.p,{children:["If you find that Misti is too noisy (e.g., detecting issues that are not relevant to your project), you can adjust your Misti configuration file to suppress those warnings. Refer to the ",(0,i.jsx)(n.a,{href:"./configuration",children:"Configuration"})," section for more details on how to customize your settings."]}),"\n",(0,i.jsx)(n.h3,{id:"using-sarif-and-github-actions",children:"Using SARIF and GitHub Actions"}),"\n",(0,i.jsx)(n.p,{children:"Additionally, it is possible to integrate Misti with GitHub Actions code scanning using the SARIF output format. After this, the issues found by Misti will be shown in the PR like this:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"CFG Example",src:e(1346).A+"",width:"1253",height:"672"})}),"\n",(0,i.jsx)(n.p,{children:"To implement this, adjust the previous GitHub Actions with the following:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Add ",(0,i.jsx)(n.code,{children:"--output-format sarif"})," and ",(0,i.jsx)(n.code,{children:"-O /tmp/misti"})," to the Misti execution command"]}),"\n",(0,i.jsx)(n.li,{children:"Add the following commands at the top of your file:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"permissions:\n  security-events: write\n  actions: read\n  contents: read\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Add the following action after executing Misti:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"- name: Upload SARIF results\n  uses: github/codeql-action/upload-sarif@v3\n  with:\n    sarif_file: /tmp/misti/warnings.sarif\n    category: misti-security-analysis\n"})}),"\n",(0,i.jsxs)(o,{children:[(0,i.jsx)("summary",{children:"Updated GitHub Actions configuration"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"name: CI\n\npermissions:\n  security-events: write\n  actions: read\n  contents: read\n\non:\n  push:\n    branches: [ \"main\" ]\n  pull_request:\n    branches: [ \"main\" ]\n  workflow_dispatch:\n\njobs:\n  test:\n    strategy:\n      fail-fast: false\n      matrix:\n        node-version: [22]\n        os: [ubuntu-latest]\n    runs-on: ${{ matrix.os }}\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n\n      - name: Install Souffl\xe9 on Ubuntu\n        if: matrix.os == 'ubuntu-latest'\n        run: |\n          sudo wget https://souffle-lang.github.io/ppa/souffle-key.public -O /usr/share/keyrings/souffle-archive-keyring.gpg\n          echo \"deb [signed-by=/usr/share/keyrings/souffle-archive-keyring.gpg] https://souffle-lang.github.io/ppa/ubuntu/ stable main\" | sudo tee /etc/apt/sources.list.d/souffle.list\n          sudo apt update\n          sudo apt install souffle\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: ${{ matrix.node-version }}\n\n      - name: Install dependencies\n        run: yarn install\n\n      - name: Run Misti\n        run: yarn misti --min-severity medium -o sarif -O /tmp/misti /path/to/your/tact.config.json\n\n      - name: Upload SARIF results\n        uses: github/codeql-action/upload-sarif@v3\n        if: always() && hashFiles('/tmp/misti/warnings.sarif') != ''\n        with:\n          sarif_file: /tmp/misti/warnings.sarif\n          category: misti-security-analysis\n"})})]}),"\n",(0,i.jsx)(n.h2,{id:"integration-with-blueprint-projects",children:"Integration with Blueprint Projects"}),"\n",(0,i.jsx)(n.p,{children:"To add Misti to the CI for your Blueprint project, follow these steps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.a,{href:"/tools/misti/docs/next/tutorial/blueprint",children:["Install ",(0,i.jsx)(n.code,{children:"blueprint-misti"})]}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Follow the steps to set up the GitHub action above, but replace the ",(0,i.jsx)(n.code,{children:"yarn misti"})," command with ",(0,i.jsx)(n.code,{children:"npx blueprint misti --blueprint-project <PROJECT_NAME>"}),", where ",(0,i.jsx)(n.code,{children:"<PROJECT_NAME>"})," is the name of the project displayed when you run ",(0,i.jsx)(n.code,{children:"npx blueprint build"}),"."]}),"\n"]})]})}function d(t={}){const{wrapper:n}={...(0,s.R)(),...t.components};return n?(0,i.jsx)(n,{...t,children:(0,i.jsx)(u,{...t})}):u(t)}},1346:(t,n,e)=>{e.d(n,{A:()=>i});const i=e.p+"assets/images/misti-sarif-d9eae90b494aa7d5c63393f3027b6287.png"},8453:(t,n,e)=>{e.d(n,{R:()=>r,x:()=>a});var i=e(6540);const s={},o=i.createContext(s);function r(t){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof t?t(n):{...n,...t}}),[n,t])}function a(t){let n;return n=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:r(t.components),i.createElement(o.Provider,{value:n},t.children)}}}]);